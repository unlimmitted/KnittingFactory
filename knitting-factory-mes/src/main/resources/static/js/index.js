import{o,c as r,a as e,w as S,v as N,F as m,r as $,t as d,b as E,p as v,d as y,e as g,f as _,g as h,h as I,i as x,j as V,S as U,k as G,m as H,x as J,l as Q,n as Y,q as j,s as z,u as K}from"./vendor.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))u(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&u(n)}).observe(document,{childList:!0,subtree:!0});function a(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(i){if(i.ep)return;i.ep=!0;const l=a(i);fetch(i.href,l)}})();const p=(t,s)=>{const a=t.__vccOpts||t;for(const[u,i]of s)a[u]=i;return a},X={el:"infoPrice",props:["availableMaterials"],data:()=>({isModalOpen:!1,timeNorm:1,selectedMaterialUnit:"Не выбрано",isFilled:!1,infoBoxPrice:0,selectedMaterial:[],recipeName:"",quantity:1,addedMaterials:[]}),methods:{openModal(){this.isModalOpen=!0},closeModal(){this.isModalOpen=!1},checkInputFields(){this.isFilled=this.recipeName.trim()!==""&&this.addedMaterials.length!==0},updateInfoBox(){let t=0;for(let s of this.addedMaterials)t+=s.material.price*s.quantity;this.infoBoxPrice=t},deleteMaterial(t){this.addedMaterials.splice(t,1)},sendNewRecipe(){let t={material:this.addedMaterials,products:{name:this.recipeName,price:this.infoBoxPrice,productionTime:this.timeNorm}};this.$emit("sendNewRecipe",t),this.closeModal(),this.selectedMaterialUnit="Не выбрано",this.addedMaterials=[],this.selectedMaterial=[],this.recipeName="",this.quantity=1},addMaterial(){this.selectedMaterial.quantity=this.quantity,this.addedMaterials.push(this.selectedMaterial)},onChangeSelectorMaterial(t){let s=this.availableMaterials[t.target.value];this.unitName=s.unitName,this.typeName=s.typeName,this.selectedMaterial={material:{id:s.id,name:s.name,price:s.price,type:s.type,unit:s.unit,typeName:s.typeName,unitName:s.unitName}}},changeSelectedMaterialUnit(){this.selectedMaterialUnit=this.unitName||"Не выбрано"}},computed:{isFormValid(){return this.recipeName.trim()!==""&&this.addedMaterials.length!==0}},watch:{recipeName(t,s){this.checkInputFields()},selectedMaterial:{handler(t,s){this.changeSelectedMaterialUnit()},deep:!0},addedMaterials:{handler(t,s){this.updateInfoBox(),this.checkInputFields()},deep:!0}}},M=t=>(v("data-v-7d95eadb"),t=t(),y(),t),Z={class:"newRecipeForm"},ee={class:"recipeNaming"},te={class:"items"},se=M(()=>e("p",null,"Название рецепта",-1)),ne={class:"selectMaterialBox"},le={class:"selectorMaterial"},ae=M(()=>e("p",null,"Материал",-1)),ie=M(()=>e("option",{selected:"",disabled:"",hidden:""},"Выбери",-1)),oe=["value"],re={class:"inputField"},de=M(()=>e("p",null,"Количество",-1)),ce={class:"materialUnit"},ue=M(()=>e("p",null,"Единица измерения",-1)),he={class:"unit"},pe={key:0,class:"addMaterialBtn"},_e=M(()=>e("hr",{style:{width:"100%",margin:"0"}},null,-1)),me={class:"addedMaterials"},ge=M(()=>e("tr",null,[e("th",null,"Наименование"),e("th",null,"Количество"),e("th",null,"Единица измерения"),e("th",null,"Тип"),e("th",null,"Удалить материал")],-1)),$e=["onClick"],ve={key:1},ye=M(()=>e("td",{colspan:"5"},"Материалы не добавлены",-1)),fe=[ye],Me={class:"submitBtn"},Oe=["disabled"],be={key:1,id:"recipeModal",class:"modal"},Se={class:"modal-content"},Ne={class:"infoBox"},Re={class:"aboutRecipe"},Pe=M(()=>e("h1",null,"О рецепте",-1)),we={id:"infoPrice"},Ee={class:"timeNorm",style:{display:"flex"}},Ie=M(()=>e("p",null,"Норма времени на единицу товара (минуты):",-1));function xe(t,s,a,u,i,l){return o(),r("div",Z,[e("div",ee,[e("div",te,[se,S(e("input",{class:"recipeName",type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>t.recipeName=n)},null,512),[[N,t.recipeName]])])]),e("div",ne,[e("div",le,[ae,e("select",{onChange:s[1]||(s[1]=n=>l.onChangeSelectorMaterial(n))},[ie,(o(!0),r(m,null,$(a.availableMaterials,n=>(o(),r("option",{value:a.availableMaterials.indexOf(n)},d(n.name),9,oe))),256))],32)]),e("div",re,[de,S(e("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=n=>t.quantity=n)},null,512),[[N,t.quantity]])]),e("div",ce,[ue,e("div",he,[e("p",null,d(t.selectedMaterialUnit),1)])])]),t.selectedMaterial.length!==0?(o(),r("div",pe,[e("button",{class:"addMaterialBtn",onClick:s[3]||(s[3]=(...n)=>l.addMaterial&&l.addMaterial(...n)),type:"submit"},"Добавить материал ")])):E("",!0),_e,e("div",me,[e("table",{onChange:s[4]||(s[4]=(...n)=>l.updateInfoBox&&l.updateInfoBox(...n))},[ge,t.addedMaterials.length>0?(o(!0),r(m,{key:0},$(t.addedMaterials,(n,c)=>(o(),r("tr",{key:c},[e("td",null,d(n.material.name),1),e("td",null,d(n.quantity),1),e("td",null,d(n.material.unitName),1),e("td",null,d(n.material.typeName),1),e("td",null,[e("button",{class:"delElemBtn",onClick:O=>l.deleteMaterial(c)},"Удалить",8,$e)])]))),128)):(o(),r("tr",ve,fe))],32)]),e("div",Me,[e("button",{disabled:!t.isFilled,type:"button",onClick:s[5]||(s[5]=(...n)=>l.openModal&&l.openModal(...n))}," Подтвердить ",8,Oe)]),t.isModalOpen?(o(),r("div",be,[e("div",Se,[e("span",{class:"close",onClick:s[6]||(s[6]=(...n)=>l.closeModal&&l.closeModal(...n))},"×"),e("div",Ne,[e("div",Re,[Pe,e("p",we,"Себестоимость: "+d(t.infoBoxPrice)+" ₽",1),e("div",Ee,[Ie,S(e("input",{type:"number","onUpdate:modelValue":s[7]||(s[7]=n=>t.timeNorm=n),min:"1"},null,512),[[N,t.timeNorm]])]),e("button",{type:"submit",class:"createNewRecipe",onClick:s[8]||(s[8]=(...n)=>l.sendNewRecipe&&l.sendNewRecipe(...n))}," Подтвердить ")])])])])):E("",!0)])}const Ce=p(X,[["render",xe],["__scopeId","data-v-7d95eadb"]]),ke={props:["allRecipes"],data:()=>({}),methods:{deleteRecipe(t){g.post("http://localhost:8080/api/v1/delete-recipe",t).then(s=>{this.allRecipes=s.data})}}},k=t=>(v("data-v-4073e77a"),t=t(),y(),t),De={key:0},Te={class:"allRecipes"},qe={class:"labels"},Ae={class:"components"},Be=k(()=>e("tr",null,[e("th",null,"Наименование"),e("th",null,"Количество"),e("th",null,"Единица измерения"),e("th",null,"Тип")],-1)),Fe={class:"delBtn"},We=["onClick"],Le={key:1,class:"notFound"},Ve=k(()=>e("h1",null,"Нет рецептов",-1)),Ue=[Ve];function Ge(t,s,a,u,i,l){return a.allRecipes.length>0?(o(),r("div",De,[(o(!0),r(m,null,$(a.allRecipes,n=>(o(),r("div",Te,[e("div",qe,[e("p",null,"Название: "+d(n.products.name),1),e("p",null,"Себестоимость: "+d(n.products.price)+"₽",1)]),e("div",Ae,[e("table",null,[Be,(o(!0),r(m,null,$(n.material,c=>(o(),r("tr",null,[e("td",null,d(c.material.name),1),e("td",null,d(c.quantity),1),e("td",null,d(c.material.unitName),1),e("td",null,d(c.material.typeName),1)]))),256))])]),e("div",Fe,[e("button",{onClick:c=>l.deleteRecipe(n)},"Удалить рецепт",8,We)])]))),256))])):(o(),r("div",Le,Ue))}const He=p(ke,[["render",Ge],["__scopeId","data-v-4073e77a"]]),Je={components:{AddingRecipe:Ce,AllRecipes:He},data:()=>({allRecipes:[],selectedMaterial:[],recipeName:"",quantity:1,addedMaterials:[],availableMaterials:[]}),methods:{showAddingRecipe(t){let s=document.getElementsByClassName("accordion")[t];s.classList.toggle("active");let a=s.nextElementSibling;a.style.maxHeight?a.style.maxHeight=null:a.style.maxHeight="100%"},sendNewRecipe(t){g.post("http://localhost:8080/api/v1/create-recipe",t).then(s=>{this.allRecipes=s.data})}},mounted(){g.get("http://localhost:8080/api/v1/get-all-material").then(t=>{this.availableMaterials=t.data}),g.get("http://localhost:8080/api/v1/get-all-recipe").then(t=>{this.allRecipes=t.data})}},Qe={class:"main"},Ye=e("p",null,"Рецепты",-1),je=e("hr",null,null,-1),ze={class:"panel"},Ke={class:"panel"};function Xe(t,s,a,u,i,l){const n=_("AllRecipes"),c=_("AddingRecipe");return o(),r("div",Qe,[Ye,je,e("button",{class:"accordion",onClick:s[0]||(s[0]=O=>l.showAddingRecipe(0))},"Существующие рецепты"),e("div",ze,[h(n,{allRecipes:t.allRecipes},null,8,["allRecipes"])]),e("button",{class:"accordion",onClick:s[1]||(s[1]=O=>l.showAddingRecipe(1))},"Добавление рецепта"),e("div",Ke,[h(c,{onSendNewRecipe:l.sendNewRecipe,availableMaterials:t.availableMaterials},null,8,["onSendNewRecipe","availableMaterials"])])])}const D=p(Je,[["render",Xe]]),Ze={},et={class:"menu"};function tt(t,s,a,u,i,l){const n=_("router-link");return o(),r("div",et,[e("ul",null,[e("li",null,[h(n,{to:{name:"Warehouse"},class:"link"},{default:I(()=>[x("Склад")]),_:1})]),e("li",null,[h(n,{to:{name:"Recipes"},class:"link"},{default:I(()=>[x("Рецепты")]),_:1})]),e("li",null,[h(n,{to:{name:"Orders"},class:"link"},{default:I(()=>[x("Заказы")]),_:1})])])])}const st=p(Ze,[["render",tt],["__scopeId","data-v-ff083aad"]]),f=new V.Store({state:{ordersDone:[],ordersStats:[],completedOrders:[],acceptedOrders:[],incomingOrders:[]},getters:{INCOMING_ORDERS:t=>t.incomingOrders,ORDERS_STATS:t=>t.ordersStats,ORDERS_DONE:t=>t.ordersDone,ACCEPTED_ORDERS:t=>t.acceptedOrders,COMPLETE_ORDERS:t=>t.completedOrders},mutations:{SET_INCOMING_ORDERS:(t,s)=>{t.incomingOrders=s},SET_ACCEPTED_ORDERS:(t,s)=>{t.acceptedOrders=s},SET_COMPLETE_ORDERS:(t,s)=>{t.completedOrders=s},SET_ORDERS_STATS:(t,s)=>{t.ordersStats=s},SET_ORDERS_DONE:(t,s)=>{t.ordersDone=s}},actions:{}});function nt(){const t=new U("http://localhost:8080/ws");let s=G.over(t);s.debug=function(){},s.connect({},()=>{s.subscribe("/topic/orders/",a=>lt(a)),s.subscribe("/topic/ordersInWork/",a=>at(a))})}function lt(t){f.commit("SET_ORDERS_STATS",JSON.parse(t.body).stats),f.commit("SET_COMPLETE_ORDERS",JSON.parse(t.body).completed),f.commit("SET_ACCEPTED_ORDERS",JSON.parse(t.body).accepted),f.commit("SET_INCOMING_ORDERS",JSON.parse(t.body).newOrders)}function at(t){f.commit("SET_ORDERS_DONE",JSON.parse(t.body))}const it={components:{Menu:st,Recipes:D},data(){return{received_messages:[],send_message:null,connected:!1}},mounted(){nt()},methods:{}},ot={class:"superMain"},rt={key:0,class:"isNotCustomer"},dt={class:"content"};function ct(t,s,a,u,i,l){const n=_("Menu"),c=_("router-view");return o(),r("div",ot,[t.$route.name!=="CustomerScreen"?(o(),r("div",rt,[h(n)])):E("",!0),e("div",dt,[h(c)])])}const ut=p(it,[["render",ct]]),ht={props:["materialList"],data(){return{materialInWarehouseId:0,selectedMaterial:{id:null,name:null,price:null,unit:null,type:null,typeName:null,unitName:null},materialQuantity:1}},methods:{onChangeSelectorMaterial(t){this.materialInWarehouseId=this.materialList[t.target.value].id,this.selectedMaterial.id=this.materialList[t.target.value].material.id,this.selectedMaterial.name=this.materialList[t.target.value].material.name,this.selectedMaterial.price=this.materialList[t.target.value].material.price,this.selectedMaterial.unit=this.materialList[t.target.value].material.unit,this.selectedMaterial.type=this.materialList[t.target.value].material.type,this.selectedMaterial.unitName=this.materialList[t.target.value].material.unitName,this.selectedMaterial.typeName=this.materialList[t.target.value].material.typeName},orderingMaterial(){let t={id:this.materialInWarehouseId,quantity:this.materialQuantity,material:this.selectedMaterial};g.post("http://localhost:8080/api/v1/ordering-material",t),this.selectedMaterial={id:null,name:null,price:null,unit:null,type:null,typeName:null,unitName:null},this.materialQuantity=1}}},T=t=>(v("data-v-b88e9b86"),t=t(),y(),t),pt={class:"materialTable"},_t=T(()=>e("tr",null,[e("th",null,"Название материала"),e("th",null,"Цена за единицу"),e("th",null,"Требуемое количество"),e("th",null,"Единицы измерения"),e("th",null,"Заказать")],-1)),mt=T(()=>e("option",{selected:"",disabled:"",hidden:""},"Выбери",-1)),gt=["value"];function $t(t,s,a,u,i,l){return o(),r("table",pt,[_t,e("tr",null,[e("td",null,[e("select",{onChange:s[0]||(s[0]=n=>l.onChangeSelectorMaterial(n))},[mt,(o(!0),r(m,null,$(a.materialList,n=>(o(),r("option",{value:a.materialList.indexOf(n)},d(n.material.name),9,gt))),256))],32)]),e("td",null,d(i.selectedMaterial.price),1),e("td",null,[S(e("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=n=>i.materialQuantity=n),min:"1"},null,512),[[N,i.materialQuantity]])]),e("td",null,d(i.selectedMaterial.unitName),1),e("td",null,[e("button",{onClick:s[2]||(s[2]=(...n)=>l.orderingMaterial&&l.orderingMaterial(...n))},"Заказать")])])])}const q=p(ht,[["render",$t],["__scopeId","data-v-b88e9b86"]]),vt={computed:{store(){return f}},data(){return{disabledSubmitBtn:!1,isModalOpen:!1,materialsInWarehouse:[],recipeProduct:null,currentOrderIndex:null}},mounted(){},methods:{sleep(t){return new Promise(s=>setTimeout(s,t))},async getRecipeByProduct(){await g.post("http://localhost:8080/api/v1/get-recipe-by-product",this.$store.getters.INCOMING_ORDERS[this.currentOrderIndex].product).then(t=>{this.recipeProduct=t.data.material})},async getMaterialsInWarehouseByMaterial(t){await g.post("http://localhost:8080/api/v1/get-material-in-warehouse-by-material",t).then(s=>{this.materialsInWarehouse.push(s.data)})},async openModal(t){this.currentOrderIndex=t,await this.getRecipeByProduct();for(let s=0;s<this.recipeProduct.length;s++)await this.getMaterialsInWarehouseByMaterial(this.recipeProduct[s].material);console.log(this.materialsInWarehouse[1]),this.isModalOpen=!0,await this.changeColorItems()},async changeColorItems(){await this.sleep(100),this.disabledSubmitBtn=!1;let t=this.$store.getters.INCOMING_ORDERS[this.currentOrderIndex];for(let s=0;s<this.recipeProduct.length;s++)if(this.recipeProduct[s].quantity*t.quantity>this.materialsInWarehouse[s].quantity){let a=document.getElementById(`${s}_quantity`);a.style.color="red",this.disabledSubmitBtn=!0}},closeModal(){this.isModalOpen=!1},dateFormatter(t){const s=new Date(t),a=n=>n<10?`0${n}`:n,u=a(s.getDate()),i=a(s.getMonth()+1),l=s.getFullYear();return`${u}.${i}.${l}`},acceptOrder(){let t=this.$store.getters.INCOMING_ORDERS[this.currentOrderIndex];g.post("http://localhost:8080/api/v1/make-order-accepted",t),this.closeModal()}}},R=t=>(v("data-v-9a9a7f9d"),t=t(),y(),t),yt={key:0,class:"content"},ft=R(()=>e("tr",null,[e("th",null,"Номер заказа"),e("th",null,"Наименование товара"),e("th",null,"Количество"),e("th",null,"Дедлайн"),e("th",null,"Дата заказа"),e("th",null,"Принять")],-1)),Mt=["onClick"],Ot={key:1,class:"content"},bt=R(()=>e("h1",null,"Нет входящих заказов",-1)),St=[bt],Nt={key:2,id:"recipeModal",class:"modal"},Rt={class:"modal-content"},Pt={class:"infoBox"},wt={class:"aboutRecipe"},Et=R(()=>e("h1",null,"Возможность выполнения",-1)),It=R(()=>e("p",null,"Материалы: ",-1)),xt=R(()=>e("tr",null,[e("th",null,"Материал"),e("th",null,"Требуется"),e("th",null,"Есть на складе")],-1)),Ct=["id"],kt=["disabled"];function Dt(t,s,a,u,i,l){return o(),r(m,null,[l.store.getters.INCOMING_ORDERS.length>0?(o(),r("div",yt,[e("table",null,[ft,(o(!0),r(m,null,$(l.store.getters.INCOMING_ORDERS,(n,c)=>(o(),r("tr",null,[e("td",null,d(n.id),1),e("td",null,d(n.product.name),1),e("td",null,d(n.quantity),1),e("td",null,d(l.dateFormatter(n.deadline)),1),e("td",null,d(l.dateFormatter(n.dateOfOrder)),1),e("td",null,[e("center",null,[e("button",{onClick:O=>l.openModal(c)},"Принять",8,Mt)])])]))),256))])])):(o(),r("div",Ot,St)),i.isModalOpen?(o(),r("div",Nt,[e("div",Rt,[e("span",{class:"close",onClick:s[0]||(s[0]=(...n)=>l.closeModal&&l.closeModal(...n))},"×"),e("div",Pt,[e("div",wt,[Et,It,e("table",null,[xt,(o(!0),r(m,null,$(i.recipeProduct,(n,c)=>(o(),r("tr",null,[e("td",null,d(n.material.name),1),e("td",null,d(n.quantity*l.store.getters.INCOMING_ORDERS[i.currentOrderIndex].quantity),1),e("td",{id:c+"_quantity"},d(i.materialsInWarehouse[c].quantity),9,Ct)]))),256))]),e("button",{disabled:i.disabledSubmitBtn,type:"submit",class:"createNewRecipe",onClick:s[1]||(s[1]=(...n)=>l.acceptOrder&&l.acceptOrder(...n))}," Подтвердить ",8,kt)])])])])):E("",!0)],64)}const Tt=p(vt,[["render",Dt],["__scopeId","data-v-9a9a7f9d"]]),qt={computed:{store(){return f}},data(){return{}},methods:{dateFormatter(t){const s=new Date(t),a=n=>n<10?`0${n}`:n,u=a(s.getDate()),i=a(s.getMonth()+1),l=s.getFullYear();return`${u}.${i}.${l}`},acceptOrder(t){this.$emit("orderToWork",t)}}},A=t=>(v("data-v-f3775c0f"),t=t(),y(),t),At={key:0,class:"content"},Bt={class:"acceptedOrdersTable"},Ft=A(()=>e("tr",null,[e("th",null,"Номер заказа"),e("th",null,"Наименование товара"),e("th",null,"Количество"),e("th",null,"Дедлайн"),e("th",null,"Дата заказа"),e("th",null,"В работу")],-1)),Wt=["onClick"],Lt={key:1,class:"content"},Vt=A(()=>e("center",null,[e("h1",null,"Нет принятых заказов")],-1)),Ut=[Vt];function Gt(t,s,a,u,i,l){return l.store.getters.ACCEPTED_ORDERS.length>0?(o(),r("div",At,[e("table",Bt,[Ft,(o(!0),r(m,null,$(l.store.getters.ACCEPTED_ORDERS,n=>(o(),r("tr",null,[e("td",null,d(n.id),1),e("td",null,d(n.product.name),1),e("td",null,d(n.quantity),1),e("td",null,d(l.dateFormatter(n.deadline)),1),e("td",null,d(l.dateFormatter(n.dateOfOrder)),1),e("td",null,[e("center",null,[e("button",{onClick:c=>l.acceptOrder(n)},"Пустить в работу",8,Wt)])])]))),256))])])):(o(),r("div",Lt,Ut))}const Ht=p(qt,[["render",Gt],["__scopeId","data-v-f3775c0f"]]),Jt={computed:{store(){return f},...H({ordersStats:"ORDERS_STATS"}),profitData(){return{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Ноябрь","Декаберь"],options:{chart:{id:"vuechart-example"},xaxis:{categories:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Ноябрь","Декаберь"]}},series:[{name:"series-1",data:this.ordersStats&&this.ordersStats.length>0?this.ordersStats[0]:[]}]}},ordersData(){return{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Ноябрь","Декаберь"],options:{chart:{id:"vuechart-example"},xaxis:{categories:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Ноябрь","Декаберь"]}},series:[{name:"series-1",data:this.ordersStats&&this.ordersStats.length>0?this.ordersStats[1]:[]}]}}},data(){return{}},methods:{dateFormatter(t){const s=new Date(t),a=n=>n<10?`0${n}`:n,u=a(s.getDate()),i=a(s.getMonth()+1),l=s.getFullYear();return`${u}.${i}.${l}`}}},P=t=>(v("data-v-50293eca"),t=t(),y(),t),Qt={class:"container"},Yt={class:"charts"},jt={class:"chart"},zt={class:"item"},Kt=P(()=>e("p",null,"Статистика дохода",-1)),Xt={class:"chart"},Zt={class:"item"},es=P(()=>e("p",null,"Статистика заказов",-1)),ts=P(()=>e("hr",null,null,-1)),ss={class:"acceptedOrdersTable",style:{"margin-top":"20px"}},ns=P(()=>e("tr",null,[e("th",null,"Номер заказа"),e("th",null,"Наименование товара"),e("th",null,"Количество"),e("th",null,"Цена заказа"),e("th",null,"Цена за единицу товара"),e("th",null,"Дата заказа")],-1)),ls={key:1},as=P(()=>e("td",{colspan:"6"},"Нет выполненных заказов",-1)),is=[as];function os(t,s,a,u,i,l){const n=_("apexchart");return o(),r(m,null,[e("div",Qt,[e("div",Yt,[e("div",jt,[e("div",zt,[Kt,h(n,{width:"600",type:"line",options:l.profitData.options,series:l.profitData.series},null,8,["options","series"])])]),e("div",Xt,[e("div",Zt,[es,h(n,{width:"600",type:"line",options:l.ordersData.options,series:l.ordersData.series},null,8,["options","series"])])])])]),ts,e("table",ss,[ns,l.store.getters.COMPLETE_ORDERS.length>0?(o(!0),r(m,{key:0},$(l.store.getters.COMPLETE_ORDERS,c=>(o(),r("tr",null,[e("td",null,d(c.id),1),e("td",null,d(c.product.name),1),e("td",null,d(c.quantity),1),e("td",null,d(Math.ceil(c.quantity*c.product.price)),1),e("td",null,d(c.product.price),1),e("td",null,d(l.dateFormatter(c.dateOfOrder)),1)]))),256)):(o(),r("tr",ls,is))])],64)}const rs=p(Jt,[["render",os],["__scopeId","data-v-50293eca"]]),ds={components:{FwbProgress:J},data(){return{data:[]}},methods:{dateFormatter(t){const s=new Date(t),a=n=>n<10?`0${n}`:n,u=a(s.getDate()),i=a(s.getMonth()+1),l=s.getFullYear();return`${u}.${i}.${l}`}},computed:{store(){return f}}},B=t=>(v("data-v-eb817ee9"),t=t(),y(),t),cs={key:0},us={class:"orderTable"},hs=B(()=>e("tr",null,[e("th",null,"Номер заказа"),e("th",null,"Продукт"),e("th",null,"Количество"),e("th",null,"Дедлайн"),e("th",null,"Прогресс")],-1)),ps={key:1},_s=B(()=>e("center",null,[e("h1",null,"Нет выполняющихся заказов")],-1)),ms=[_s];function gs(t,s,a,u,i,l){const n=_("fwb-progress");return l.store.getters.ORDERS_DONE.length>0?(o(),r("div",cs,[e("table",us,[hs,(o(!0),r(m,null,$(l.store.getters.ORDERS_DONE,c=>(o(),r("tr",null,[e("td",null,d(c.id),1),e("td",null,d(c.order.product.name),1),e("td",null,d(c.order.quantity),1),e("td",null,d(l.dateFormatter(c.order.deadline)),1),e("td",null,[h(n,{progress:Math.floor(c.done*100/c.needToDo),"label-position":"outside","label-progress":"",size:"sm"},null,8,["progress"])])]))),256))])])):(o(),r("div",ps,ms))}const $s=p(ds,[["render",gs],["__scopeId","data-v-eb817ee9"]]),vs={components:{OrdersInWork:$s,CompletedOrders:rs,AcceptedOrders:Ht,AllIncomingOrders:Tt,OrderingMaterials:q},data(){return{materialInWarehouse:[]}},mounted(){this.getAllMaterials()},methods:{getAllMaterials(){g.get("http://localhost:8080/api/v1/get-material-in-warehouse").then(t=>{this.materialInWarehouse=t.data})},orderToWork(t){g.post("http://localhost:8080/api/v1/put-order-to-work",t)},showAddingRecipe(t){let s=document.getElementsByClassName("accordion")[t];s.classList.toggle("active");let a=s.nextElementSibling;a.style.maxHeight?a.style.maxHeight=null:a.style.maxHeight="100%"}}},C=t=>(v("data-v-ea1c941b"),t=t(),y(),t),ys={class:"main"},fs=C(()=>e("p",null,"Заказы",-1)),Ms=C(()=>e("hr",null,null,-1)),Os={class:"panel"},bs={class:"panel"},Ss={class:"panel"},Ns={class:"panel"},Rs=C(()=>e("hr",{style:{"margin-top":"24px"}},null,-1)),Ps={class:"panel"};function ws(t,s,a,u,i,l){const n=_("AllIncomingOrders"),c=_("AcceptedOrders"),O=_("OrdersInWork"),W=_("CompletedOrders"),L=_("OrderingMaterials");return o(),r("div",ys,[fs,Ms,e("button",{class:"accordion",onClick:s[0]||(s[0]=w=>l.showAddingRecipe(0))},"Полученные заказы"),e("div",Os,[h(n)]),e("button",{class:"accordion",onClick:s[1]||(s[1]=w=>l.showAddingRecipe(1))},"Ожидают добавления в очередь"),e("div",bs,[h(c,{onOrderToWork:l.orderToWork},null,8,["onOrderToWork"])]),e("button",{class:"accordion",onClick:s[2]||(s[2]=w=>l.showAddingRecipe(2))},"Прогресс выполнения"),e("div",Ss,[h(O)]),e("button",{class:"accordion",onClick:s[3]||(s[3]=w=>l.showAddingRecipe(3))},"Выполненые заказы"),e("div",Ns,[h(W)]),Rs,e("button",{class:"accordion",onClick:s[4]||(s[4]=w=>l.showAddingRecipe(4))},"Заказать материалы"),e("div",Ps,[h(L,{materialList:i.materialInWarehouse},null,8,["materialList"])])])}const Es=p(vs,[["render",ws],["__scopeId","data-v-ea1c941b"]]),Is={props:["existingMaterial"]},xs={key:0},Cs={style:{"margin-top":"20px"}},ks=e("tr",null,[e("th",null,"Наименование"),e("th",null,"Количество"),e("th",null,"Тип"),e("th",null,"Суммарная стоиомсть (рубли)")],-1),Ds={key:1},Ts=e("center",null,[e("h3",null,"Материалов на складе нет")],-1),qs=[Ts];function As(t,s,a,u,i,l){return a.existingMaterial.length!==0?(o(),r("div",xs,[e("table",Cs,[ks,(o(!0),r(m,null,$(a.existingMaterial,n=>(o(),r("tr",null,[e("td",null,d(n.material.name),1),e("td",null,d(n.quantity),1),e("td",null,d(n.material.typeName),1),e("td",null,d(n.material.price*n.quantity),1)]))),256))])])):(o(),r("div",Ds,qs))}const Bs=p(Is,[["render",As]]),Fs={props:["existingProducts"]},Ws={key:0},Ls={style:{"margin-top":"20px"}},Vs=e("tr",null,[e("th",null,"Наименование"),e("th",null,"Количество"),e("th",null,"Стоиомсть (рубли)"),e("th",null,"Относится к заказу (номер заказа)")],-1),Us={key:1},Gs=e("center",null,[e("h3",null,"Товаров на складе нет")],-1),Hs=[Gs];function Js(t,s,a,u,i,l){return a.existingProducts.length!==0?(o(),r("div",Ws,[e("table",Ls,[Vs,(o(!0),r(m,null,$(a.existingProducts,n=>(o(),r("tr",null,[e("td",null,d(n.product.name),1),e("td",null,d(n.quantity),1),e("td",null,d(n.product.price),1),e("td",null,d(n.order.id),1)]))),256))])])):(o(),r("div",Us,Hs))}const Qs=p(Fs,[["render",Js]]),Ys={components:{ExistingProducts:Qs,OrderingMaterials:q,ExistingMaterials:Bs},data:()=>({existingProducts:[],existingMaterial:[]}),mounted(){this.getExistingProducts(),this.getExistingMaterial()},methods:{showAddingRecipe(t){let s=document.getElementsByClassName("accordion")[t];s.classList.toggle("active");let a=s.nextElementSibling;a.style.maxHeight?a.style.maxHeight=null:a.style.maxHeight="100%"},getExistingProducts(){g.get("http://localhost:8080/api/v1/get-product-in-warehouse").then(t=>{this.existingProducts=t.data})},getExistingMaterial(){g.get("http://localhost:8080/api/v1/get-material-in-warehouse").then(t=>{this.existingMaterial=t.data})}}},F=t=>(v("data-v-4a156b86"),t=t(),y(),t),js={class:"main"},zs=F(()=>e("p",null,"Склад",-1)),Ks=F(()=>e("hr",null,null,-1)),Xs={class:"panel"},Zs={class:"panel"};function en(t,s,a,u,i,l){const n=_("ExistingProducts"),c=_("ExistingMaterials");return o(),r("div",js,[zs,Ks,e("button",{class:"accordion",onClick:s[0]||(s[0]=O=>l.showAddingRecipe(0))},"Товары на складе"),e("div",Xs,[h(n,{existingProducts:t.existingProducts},null,8,["existingProducts"])]),e("button",{class:"accordion",onClick:s[1]||(s[1]=O=>l.showAddingRecipe(1))},"Материалы на складе"),e("div",Zs,[h(c,{existingMaterial:t.existingMaterial},null,8,["existingMaterial"])])])}const tn=p(Ys,[["render",en],["__scopeId","data-v-4a156b86"]]),sn={},nn=t=>(v("data-v-a32734f6"),t=t(),y(),t),ln={class:"main"},an=nn(()=>e("center",null,[e("h1",null,"Нечего показать")],-1)),on=[an];function rn(t,s){return o(),r("div",ln,on)}const dn=p(sn,[["render",rn],["__scopeId","data-v-a32734f6"]]),cn={props:["productProduced"],data(){return{deadline:"",quantityProduct:0,selectedProductName:"",selectedProductPrice:0,selectedProduct:[]}},methods:{onChangeSelectorProduct(t){let s=this.productProduced[t.target.value];this.selectedProduct={id:s.products.id,name:s.products.name,price:s.products.price,productionTime:s.products.productionTime}},sendNewOrder(){let t={id:null,product:{id:this.selectedProduct.id,name:this.selectedProduct.name,price:this.selectedProduct.price,productionTime:this.selectedProduct.productionTime},quantity:this.quantityProduct,deadline:new Date(this.deadline),dateOfOrder:new Date,inWork:!1,isAccepted:!1,isCompleted:!1};this.$emit("sendNewOrder",t),this.deadline="",this.quantityProduct=0,this.selectedProductName="",this.selectedProductPrice=0},changeSelectedProductName(){this.selectedProductName=this.selectedProduct.name,this.selectedProductPrice=this.selectedProduct.price*this.quantityProduct}},watch:{quantityProduct:{handler(t,s){this.changeSelectedProductName()}},selectedProduct:{handler(t,s){this.changeSelectedProductName()},deep:!0}}},b=t=>(v("data-v-1c1d8087"),t=t(),y(),t),un={class:"contentBlock"},hn=b(()=>e("center",null,[e("h1",{class:"blockTitle"},"Заказ")],-1)),pn={class:"orderDetail"},_n={class:"productsProduced"},mn={class:"selectors"},gn=b(()=>e("p",null,"Товар",-1)),$n=b(()=>e("option",{selected:"",disabled:"",hidden:""},"Выбери",-1)),vn=["value"],yn=b(()=>e("p",null,"Количество",-1)),fn=b(()=>e("p",null,"Дедлайн",-1)),Mn={class:"aboutProduct"},On=b(()=>e("center",null,[e("p",null,"Выбранно")],-1)),bn={class:"details"},Sn=b(()=>e("hr",null,null,-1));function Nn(t,s,a,u,i,l){return o(),r("div",un,[hn,e("div",pn,[e("div",_n,[e("div",mn,[gn,e("select",{onChange:s[0]||(s[0]=n=>l.onChangeSelectorProduct(n))},[$n,(o(!0),r(m,null,$(a.productProduced,n=>(o(),r("option",{value:a.productProduced.indexOf(n)},d(n.products.name),9,vn))),256))],32),yn,S(e("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=n=>i.quantityProduct=n),min:"0"},null,512),[[N,i.quantityProduct]]),fn,S(e("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=n=>i.deadline=n)},null,512),[[N,i.deadline]])])]),e("div",Mn,[On,e("div",bn,[e("p",null,"Название: "+d(i.selectedProductName),1),e("p",null,"Количество: "+d(i.quantityProduct),1),Sn,e("p",null,"Итоговая стоимость: "+d(Number(i.selectedProductPrice.toFixed(2))),1)]),e("button",{class:"orderBtn",onClick:s[3]||(s[3]=(...n)=>l.sendNewOrder&&l.sendNewOrder(...n))},"Заказать")])])])}const Rn=p(cn,[["render",Nn],["__scopeId","data-v-1c1d8087"]]),Pn={components:{NewOrder:Rn},data(){return{productProduced:[]}},mounted(){this.getAllProducts()},methods:{sendNewOrder(t){g.post("http://localhost:8080/api/v1/create-new-order",t)},getAllProducts(){g.get("http://localhost:8080/api/v1/get-all-recipe").then(t=>this.productProduced=t.data)}}};function wn(t,s,a,u,i,l){const n=_("NewOrder");return o(),Q(n,{onSendNewOrder:l.sendNewOrder,productProduced:i.productProduced},null,8,["onSendNewOrder","productProduced"])}const En=p(Pn,[["render",wn]]),In=[{path:"/",name:"StartScreen",component:dn},{path:"/recipes",name:"Recipes",component:D},{path:"/orders",name:"Orders",component:Es},{path:"/warehouse",name:"Warehouse",component:tn},{path:"/customer-screen",name:"CustomerScreen",component:En}],xn=Y({history:j(),routes:In});z(ut).use(xn).use(f).use(K).mount("#app");
